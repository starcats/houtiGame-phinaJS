  <!doctype html>

<html>
  <head>
    <meta charset='utf-8' />
    <title>Particle | phina.js</title>
  </head>
  <body>
  </body>
</html>


<script src='js/phina.js'></script>
<script>
// グローバルに展開
phina.globalize();

var ASSETS = {
  // 画像
  image: {
    'ghost': 'images/ghost.png',
  },
  /*
  sound: {
    ghostSE: 'sounds/onepoint29.mp3',
  },
  */
};

/*
 * メインシーン
 */
phina.define("MainScene", {
  // 継承
  superClass: 'DisplayScene',
  // コンストラクタ
  init: function() {
    // 親クラス初期化
    this.superInit();
    // 背景
    this.backgroundColor = 'black';
  },
  // スプライト画像作成
  update: function(app){
    if (app.frame % 60 === 0) {
      var g = Ghost().addChildTo(this);
      g.setPosition(Random.randint(120,240), Random.randint(200,400));
      //AssetManager.get('sound', 'ghostSE').play();
    }
  },
});

/*
  ゴースト
*/
phina.define("Ghost", {
  superClass: 'Sprite',
  init: function(bulletGroup) {
    this.superInit('ghost');

    this.bulletGroup = bulletGroup;
    this.vx = Random.randint(-3, 3);
    this.vy = Random.randint(-3, 3);
    
  },
  update: function() {
    this.x += this.vx;
    this.y += this.vy;
    // 画面端との判定
    if (this.left < 0 || 640 < this.right) {
      // 速度を反転する
      this.vx *= -1;
    }
    if (this.top < 0 || 960 < this.bottom) {
      // 速度を反転する
      this.vy *= -1;
    }
  },
});
/*
 * メイン処理
 */
phina.main(function() {
  // アプリケーションを生成
  var app = GameApp({
    startLabel: 'main', // MainScene から開始
    assets: ASSETS,
  });

  // 実行
  app.run();
});

</script>