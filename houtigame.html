  <!doctype html>

<html>
  <head>
    <meta charset='utf-8' />
    <title>Particle | phina.js</title>
  </head>
  <body>
  </body>
</html>


<script src='js/phina.js'></script>
<script>
// グローバルに展開
phina.globalize();

var ASSETS = {
  // 画像
  image: {
    'ghost': 'images/ghost.png',
  },
};

/*
 * メインシーン
 */
phina.define("MainScene", {
  // 継承
  superClass: 'DisplayScene',
  // コンストラクタ
  init: function() {
    // 親クラス初期化
    this.superInit();
    // 背景
    this.backgroundColor = 'black';
    // スプライト画像作成
    var ghost = Sprite('ghost').addChildTo(this);
    // 初期位置
    ghost.x = Random.randint(0, 320);;
    ghost.y = Random.randint(200, 400);
    // 初期速度
    ghost.vx = Random.randint(-3, 3);
    ghost.vy = Random.randint(-3, 3);
    // 更新イベント
    ghost.update = function() {
      // 移動
      ghost.x += ghost.vx;
      ghost.y += ghost.vy;
      // 画面端との判定
      if (ghost.left < 0 || 640 < ghost.right) {
        // 速度を反転する
        ghost.vx *= -1;
      }
      if (ghost.top < 0 || 960 < ghost.bottom) {
        // 速度を反転する
        ghost.vy *= -1;
      }
    };
  },
});

/*
 * メイン処理
 */
phina.main(function() {
  // アプリケーションを生成
  var app = GameApp({
    startLabel: 'main', // MainScene から開始
    assets: ASSETS,
  });

  // 実行
  app.run();
});

</script>